#!/usr/bin/make -f
# See debhelper(7) (uncomment to enable)
# output every command that modifies files on the build system.
#export DH_VERBOSE = 1

export PYBUILD_NAME=panflute

override_dh_installdocs:
	(cd docs; make html)
	# Use libjs-* instead of embedded JS libraries
	(cd docs/build/html/_static; rm jquery.js underscore.js)
	dh_installdocs --doc-main-package=python3-panflute -p python-panflute-doc
	dh_installdocs --doc-main-package=python3-panflute -p python3-panflute

override_dh_installman:
	pandoc -s -t man -o debian/tmp/panfl.1 debian/panfl.1.md
	pandoc -s -t man -o debian/tmp/panflute.1 debian/panflute.1.md
	dh_installman

override_dh_clean:
	(cd docs; rm -rf build)
	rm -rf .pybuild
	dh_clean

%:
	dh $@ --with python3 --buildsystem=pybuild
